package com.softannate.apppuentedecomunicacion.utils;


import android.util.Log;
import android.widget.EditText;
import com.softannate.apppuentedecomunicacion.ui.main.mensaje.listaChats.MensajesViewModel;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;


//para mostrar fecha en perfil, mensajes y enviar a la api
public class Fecha {

    // Método para formatear la fecha desde el formato dd/MM/yyyy a yyyy-MM-dd'T'HH:mm:ss
    public static String formatearFechaParaApi(String fechaStr) {
        try {
            //si la fecha no está vacía
            if (fechaStr == null || fechaStr.isEmpty()) {
                Log.e("FechaInput", "Fecha de entrada vacía o inválida");
                return null; // No continua si la fecha es vacía
            }

            // Parseo de la fecha en el formato dd/MM/yyyy
            SimpleDateFormat formatoEntrada = new SimpleDateFormat("dd/MM/yyyy", Locale.getDefault());
            Date fecha = formatoEntrada.parse(fechaStr);

            // si el parseo fue exitoso
            if (fecha == null) {
                Log.e("FechaInput", "Error al parsear la fecha: " + fechaStr);
                return null; // Si no se pudo parsear, devolver null
            }

            // formateo la fecha al formato que la API espera (yyyy-MM-dd'T'HH:mm:ss)
            SimpleDateFormat formatoSalida = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss", Locale.getDefault());
            String fechaFormateada = formatoSalida.format(fecha);

            //Log.d("FechaInput(FECHA)", "Fecha formateada para la API: " + fechaFormateada);
            return fechaFormateada;
        } catch (ParseException e) {
            e.printStackTrace();
            Log.e("FechaInput", "Error al formatear la fecha: " + fechaStr);
            return null; // Si hubo un error al parsear, devuelvo null
        }
    }

    public static String formatearFecha(Date fecha) {
        if (fecha == null) return null;
        SimpleDateFormat formato = new SimpleDateFormat("yyyy-MM-dd", Locale.getDefault());
        return formato.format(fecha);
    }


}

